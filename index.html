<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>UPSC SuperApp | Gyan Amala</title>
    <meta name="description" content="AI-Powered UPSC Preparation Tracker & Mock Test Engine">
    <meta name="theme-color" content="#4f46e5"> <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Lexend', 'sans-serif'] // Used in UI.js headings
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'view-enter': 'viewEnter 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1)',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-small': 'bounceSmall 0.5s infinite alternate'
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        viewEnter: { '0%': { opacity: '0', transform: 'scale(0.95)' }, '100%': { opacity: '1', transform: 'scale(1)' } },
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        bounceSmall: { '0%': { transform: 'translateY(0)' }, '100%': { transform: 'translateY(-4px)' } }
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&family=Lexend:wght@400;600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/style.css">
</head>
    <body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 transition-colors duration-300 min-h-screen selection:bg-indigo-500 selection:text-white">

    <div id="loading-screen" class="fixed inset-0 z-[100] bg-white dark:bg-slate-900 flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="relative">
            <div class="w-16 h-16 border-4 border-indigo-100 dark:border-indigo-900/30 rounded-full"></div>
            <div class="absolute top-0 left-0 w-16 h-16 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center text-indigo-600 dark:text-indigo-400">
                <i class="fa-solid fa-bolt text-xl animate-pulse"></i>
            </div>
        </div>
        <h2 class="mt-6 font-display font-bold text-slate-800 dark:text-white text-lg tracking-wide">UPSC SuperApp</h2>
        <p class="text-xs text-slate-400 font-bold uppercase tracking-widest mt-2">Initializing AI Core...</p>
    </div>

    <main id="app-container" class="max-w-md mx-auto min-h-screen relative shadow-2xl shadow-slate-200 dark:shadow-black/50 bg-white dark:bg-slate-900 overflow-hidden">
        </main>

    <script src="assets/js/config.js" defer></script>
    <script src="assets/js/store.js" defer></script> 
    
    <script src="assets/js/adapter.js" defer></script>
    <script src="assets/js/engine.js" defer></script>

    <script src="assets/js/StudyTracker.js" defer></script>
    <script src="assets/js/PredictiveEngine.js" defer></script>

    <script src="assets/js/ui.js" defer></script>
    <script src="assets/js/main.js" defer></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('✅ Service Worker Registered. Scope:', reg.scope))
                    .catch(err => console.error('❌ Service Worker Registration Failed:', err));
            });
        }
    </script>
        <div id="debug-console" style="
    position: fixed; 
    bottom: 0; 
    left: 0; 
    width: 100%; 
    height: 35vh; 
    background: rgba(0, 0, 0, 0.9); 
    color: #00ff00; 
    font-family: 'Courier New', monospace; 
    font-size: 11px; 
    padding: 10px; 
    overflow-y: scroll; 
    z-index: 99999; 
    border-top: 2px solid #00ff00;
    word-wrap: break-word;
">
    <div style="color: #fff; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 5px;">
        ⚠️ LIVE DEBUGGER ACTIVE
    </div>
</div>

<script>
    (function() {
        const debugBox = document.getElementById('debug-console');

        function printToScreen(message, color) {
            const div = document.createElement('div');
            div.style.color = color;
            div.style.marginBottom = '4px';
            div.style.borderBottom = '1px solid #222';
            div.innerText = `> ${message}`;
            debugBox.appendChild(div);
            debugBox.scrollTop = debugBox.scrollHeight; // Auto-scroll to bottom
        }

        // 1. Capture Standard Logs
        const oldLog = console.log;
        console.log = function(...args) {
            const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');
            printToScreen(msg, '#ffffff'); // White text
            oldLog.apply(console, args);
        };

        // 2. Capture Errors (The most important part)
        const oldError = console.error;
        console.error = function(...args) {
            const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');
            printToScreen(`❌ ERROR: ${msg}`, '#ff4444'); // Red text
            oldError.apply(console, args);
        };

        // 3. Capture "Silent" Syntax Errors (e.g., missing brackets)
        window.onerror = function(message, source, lineno, colno, error) {
            const file = source ? source.split('/').pop() : 'Unknown';
            printToScreen(`☠️ CRITICAL: ${message} \n   at ${file}:${lineno}`, '#ff00ff'); // Magenta text
        };
        
        // 4. Capture Unhandled Promise Rejections (Async errors)
        window.addEventListener('unhandledrejection', function(event) {
            printToScreen(`⚠️ ASYNC ERROR: ${event.reason}`, '#ffa500'); // Orange text
        });

        console.log("Debug Console Ready. Waiting for App...");
    })();
</script>

</body>
</html>

